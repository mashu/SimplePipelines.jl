<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · SimplePipelines.jl</title><meta name="title" content="Examples · SimplePipelines.jl"/><meta property="og:title" content="Examples · SimplePipelines.jl"/><meta property="twitter:title" content="Examples · SimplePipelines.jl"/><meta name="description" content="Documentation for SimplePipelines.jl."/><meta property="og:description" content="Documentation for SimplePipelines.jl."/><meta property="twitter:description" content="Documentation for SimplePipelines.jl."/><meta property="og:url" content="https://mashu.github.io/SimplePipelines.jl/examples/"/><meta property="twitter:url" content="https://mashu.github.io/SimplePipelines.jl/examples/"/><link rel="canonical" href="https://mashu.github.io/SimplePipelines.jl/examples/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SimplePipelines.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Examples</a><ul class="internal"><li><a class="tocitem" href="#Basic-Pipeline"><span>Basic Pipeline</span></a></li><li><a class="tocitem" href="#Parallel-Processing"><span>Parallel Processing</span></a></li><li><a class="tocitem" href="#Julia-Computation"><span>Julia Computation</span></a></li><li><a class="tocitem" href="#Bioinformatics:-NGS-Alignment"><span>Bioinformatics: NGS Alignment</span></a></li><li><a class="tocitem" href="#Bioinformatics:-Multi-Sample-Variant-Calling"><span>Bioinformatics: Multi-Sample Variant Calling</span></a></li><li><a class="tocitem" href="#Error-Handling-with-Retry-and-Fallback"><span>Error Handling with Retry and Fallback</span></a></li><li><a class="tocitem" href="#Conditional-Branching"><span>Conditional Branching</span></a></li><li><a class="tocitem" href="#Complex-DAG"><span>Complex DAG</span></a></li><li><a class="tocitem" href="#Robust-Pipeline-(All-Features)"><span>Robust Pipeline (All Features)</span></a></li></ul></li><li><a class="tocitem" href="../api/">API Reference</a></li><li><a class="tocitem" href="../design/">Design</a></li><li><a class="tocitem" href="../development/">Development</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Examples</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mashu/SimplePipelines.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mashu/SimplePipelines.jl/blob/main/docs/src/examples.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h1><h2 id="Basic-Pipeline"><a class="docs-heading-anchor" href="#Basic-Pipeline">Basic Pipeline</a><a id="Basic-Pipeline-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Pipeline" title="Permalink"></a></h2><p>A simple three-step workflow:</p><pre><code class="language-julia hljs">using SimplePipelines

download = @step download = `curl -o data.txt https://example.com/data`
process = @step process = `sort data.txt &gt; sorted.txt`
upload = @step upload = `scp sorted.txt server:/data/`

pipeline = download &gt;&gt; process &gt;&gt; upload
run_pipeline(pipeline)</code></pre><h2 id="Parallel-Processing"><a class="docs-heading-anchor" href="#Parallel-Processing">Parallel Processing</a><a id="Parallel-Processing-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-Processing" title="Permalink"></a></h2><p>Process multiple files concurrently:</p><pre><code class="language-julia hljs">using SimplePipelines

# Process each file independently
file_a = @step a = `gzip -k file_a.txt`
file_b = @step b = `gzip -k file_b.txt`
file_c = @step c = `gzip -k file_c.txt`

# Archive all compressed files
archive = @step archive = `tar -cvf archive.tar *.gz`

# Files compress in parallel, then archive
pipeline = (file_a &amp; file_b &amp; file_c) &gt;&gt; archive
run_pipeline(pipeline)</code></pre><h2 id="Julia-Computation"><a class="docs-heading-anchor" href="#Julia-Computation">Julia Computation</a><a id="Julia-Computation-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-Computation" title="Permalink"></a></h2><p>Mix Julia computation with external tools:</p><pre><code class="language-julia hljs">using SimplePipelines

# Generate data in Julia
generate = @step generate = () -&gt; begin
    data = rand(1000, 100)
    writedlm(&quot;matrix.csv&quot;, data, &#39;,&#39;)
    return &quot;Generated $(size(data)) matrix&quot;
end

# Process with external tool
process = @step process = `./analyze matrix.csv -o stats.json`

# Load and report in Julia
report = @step report = () -&gt; begin
    stats = JSON.parsefile(&quot;stats.json&quot;)
    println(&quot;Mean: $(stats[&quot;mean&quot;])&quot;)
    println(&quot;Std:  $(stats[&quot;std&quot;])&quot;)
end

pipeline = generate &gt;&gt; process &gt;&gt; report
run_pipeline(pipeline)</code></pre><h2 id="Bioinformatics:-NGS-Alignment"><a class="docs-heading-anchor" href="#Bioinformatics:-NGS-Alignment">Bioinformatics: NGS Alignment</a><a id="Bioinformatics:-NGS-Alignment-1"></a><a class="docs-heading-anchor-permalink" href="#Bioinformatics:-NGS-Alignment" title="Permalink"></a></h2><p>A typical next-generation sequencing alignment workflow:</p><pre><code class="language-julia hljs">using SimplePipelines

# Quality control
fastqc = @step fastqc = `fastqc -o qc/ reads.fq.gz`

# Trim adapters
trim = @step trim = `trimmomatic SE reads.fq.gz trimmed.fq.gz ILLUMINACLIP:adapters.fa:2:30:10`

# Align to reference
align = @step align = `bwa mem -t 8 reference.fa trimmed.fq.gz &gt; aligned.sam`

# Convert and sort
sort_bam = @step sort = `samtools sort -@ 4 -o sorted.bam aligned.sam`

# Index
index = @step index = `samtools index sorted.bam`

# Full pipeline
pipeline = fastqc &gt;&gt; trim &gt;&gt; align &gt;&gt; sort_bam &gt;&gt; index
run_pipeline(Pipeline(pipeline, name=&quot;NGS Alignment&quot;))</code></pre><h2 id="Bioinformatics:-Multi-Sample-Variant-Calling"><a class="docs-heading-anchor" href="#Bioinformatics:-Multi-Sample-Variant-Calling">Bioinformatics: Multi-Sample Variant Calling</a><a id="Bioinformatics:-Multi-Sample-Variant-Calling-1"></a><a class="docs-heading-anchor-permalink" href="#Bioinformatics:-Multi-Sample-Variant-Calling" title="Permalink"></a></h2><p>Process multiple samples in parallel, then joint-call variants:</p><pre><code class="language-julia hljs">using SimplePipelines

# Per-sample processing function
function sample_pipeline(name, fastq)
    trim = Step(Symbol(&quot;trim_&quot;, name), `trimmomatic SE $fastq $(name)_trimmed.fq.gz ...`)
    align = Step(Symbol(&quot;align_&quot;, name), `bwa mem ref.fa $(name)_trimmed.fq.gz &gt; $(name).bam`)
    sort = Step(Symbol(&quot;sort_&quot;, name), `samtools sort -o $(name)_sorted.bam $(name).bam`)
    return trim &gt;&gt; align &gt;&gt; sort
end

# Build per-sample pipelines
sample_a = sample_pipeline(&quot;A&quot;, &quot;sample_A.fq.gz&quot;)
sample_b = sample_pipeline(&quot;B&quot;, &quot;sample_B.fq.gz&quot;)
sample_c = sample_pipeline(&quot;C&quot;, &quot;sample_C.fq.gz&quot;)

# Joint variant calling (after all samples)
call = @step call = `bcftools mpileup -f ref.fa *_sorted.bam | bcftools call -mv -o variants.vcf`

# Filter variants
filter_vcf = @step filter = `bcftools filter -e &#39;QUAL&lt;20&#39; variants.vcf &gt; filtered.vcf`

# Complete pipeline:
#   (A &amp; B &amp; C) &gt;&gt; call &gt;&gt; filter
pipeline = (sample_a &amp; sample_b &amp; sample_c) &gt;&gt; call &gt;&gt; filter_vcf

run_pipeline(Pipeline(pipeline, name=&quot;Multi-Sample Variant Calling&quot;))</code></pre><h2 id="Error-Handling-with-Retry-and-Fallback"><a class="docs-heading-anchor" href="#Error-Handling-with-Retry-and-Fallback">Error Handling with Retry and Fallback</a><a id="Error-Handling-with-Retry-and-Fallback-1"></a><a class="docs-heading-anchor-permalink" href="#Error-Handling-with-Retry-and-Fallback" title="Permalink"></a></h2><p>Handle flaky operations gracefully:</p><pre><code class="language-julia hljs">using SimplePipelines

# Retry a flaky API call up to 3 times
fetch = @step fetch = `curl -f https://flaky-api.com/data -o data.json`
pipeline = Retry(fetch, 3, delay=2.0) &gt;&gt; process

# If primary method fails, use fallback
fast = @step fast = `fast-tool data.csv`
slow = @step slow = `slow-tool data.csv`
pipeline = fast | slow

# Combine: retry primary, then fallback
pipeline = Retry(fast, 3) | slow</code></pre><h2 id="Conditional-Branching"><a class="docs-heading-anchor" href="#Conditional-Branching">Conditional Branching</a><a id="Conditional-Branching-1"></a><a class="docs-heading-anchor-permalink" href="#Conditional-Branching" title="Permalink"></a></h2><p>Choose execution path at runtime:</p><pre><code class="language-julia hljs">using SimplePipelines

# Different processing based on file size
small_pipeline = @step small = `quick-process data.csv`
large_pipeline = @step decompress = `gunzip data.csv.gz` &gt;&gt; @step process = `parallel-process data.csv`

pipeline = Branch(
    () -&gt; filesize(&quot;data.csv&quot;) &lt; 100_000_000,  # &lt; 100MB
    small_pipeline,
    large_pipeline
)

# Environment-based branching
debug_steps = @step debug = `./tool --verbose --debug data`
prod_steps = @step prod = `./tool --quiet data`

pipeline = Branch(() -&gt; get(ENV, &quot;DEBUG&quot;, &quot;0&quot;) == &quot;1&quot;, debug_steps, prod_steps)</code></pre><h2 id="Complex-DAG"><a class="docs-heading-anchor" href="#Complex-DAG">Complex DAG</a><a id="Complex-DAG-1"></a><a class="docs-heading-anchor-permalink" href="#Complex-DAG" title="Permalink"></a></h2><p>A workflow with multiple parallel stages:</p><pre><code class="language-julia hljs">using SimplePipelines

# Stage 1: Fetch from multiple sources (parallel)
fetch_db = @step db = `curl -o db_data.json https://api.database.com/export`
fetch_files = @step files = `rsync -av server:/data/ local_data/`

# Stage 2: Transform each source (parallel, after fetch)
transform_db = @step transform_db = () -&gt; transform_database(&quot;db_data.json&quot;)
transform_files = @step transform_files = () -&gt; transform_files(&quot;local_data/&quot;)

# Stage 3: Merge and analyze (sequential)
merge = @step merge = () -&gt; merge_datasets(&quot;transformed_db.csv&quot;, &quot;transformed_files.csv&quot;)
analyze = @step analyze = `./analysis_tool merged.csv -o results/`

# Stage 4: Generate outputs (parallel)
report = @step report = () -&gt; generate_report(&quot;results/&quot;)
archive = @step archive = `tar -czvf results.tar.gz results/`

# Build DAG
db_branch = fetch_db &gt;&gt; transform_db
files_branch = fetch_files &gt;&gt; transform_files

pipeline = (db_branch &amp; files_branch) &gt;&gt; merge &gt;&gt; analyze &gt;&gt; (report &amp; archive)

run_pipeline(pipeline)</code></pre><h2 id="Robust-Pipeline-(All-Features)"><a class="docs-heading-anchor" href="#Robust-Pipeline-(All-Features)">Robust Pipeline (All Features)</a><a id="Robust-Pipeline-(All-Features)-1"></a><a class="docs-heading-anchor-permalink" href="#Robust-Pipeline-(All-Features)" title="Permalink"></a></h2><p>Combining all operators for a production-ready workflow:</p><pre><code class="language-julia hljs">using SimplePipelines

# Fetch with retry and fallback
primary_source = @step primary = `curl -f https://main-api.com/data -o data.json`
backup_source = @step backup = `curl -f https://backup-api.com/data -o data.json`
fetch = Retry(primary_source, 3, delay=1.0) | backup_source

# Conditional processing
quick_process = @step quick = `jq &#39;.items&#39; data.json &gt; processed.json`
full_process = @step parse = `./parse data.json` &gt;&gt; @step validate = `./validate parsed.json`

process = Branch(
    () -&gt; filesize(&quot;data.json&quot;) &lt; 1_000_000,
    quick_process,
    full_process
)

# Parallel outputs
report = @step report = () -&gt; generate_report(&quot;processed.json&quot;)
notify = @step notify = `curl -X POST https://slack.com/webhook -d &#39;{&quot;text&quot;:&quot;Done&quot;}&#39;`

# Full pipeline
pipeline = fetch &gt;&gt; process &gt;&gt; (report &amp; Retry(notify, 2))

run_pipeline(Pipeline(pipeline, name=&quot;Robust ETL&quot;))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../api/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 30 January 2026 09:50">Friday 30 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
